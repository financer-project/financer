model Household {
    id          String   @id @default(uuid())
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt
    name        String
    description String?
    currency    String

    createdBy   User?   @relation("HouseholdCreatedBy", fields: [createdById], references: [id])
    createdById String?

    accounts Account[]
    members  HouseholdMembership[] @relation(name: "HouseholdMember")

    Category Category[] @relation(name: "CategoryHousehold")

    Tag Tag[] @relation(name: "HouseholdTag")

    ImportJob ImportJob[]

    Counterparty Counterparty[] @relation(name: "HouseholdCounterparty")
}

model HouseholdMembership {
    id          String        @id @default(uuid())
    createdAt   DateTime      @default(now())
    user        User          @relation(fields: [userId], references: [id])
    userId      String
    household   Household     @relation(name: "HouseholdMember", fields: [householdId], references: [id], onDelete: Cascade)
    householdId String
    role        HouseholdRole

    defaultAccount   Account? @relation(fields: [defaultAccountId], references: [id], onDelete: SetNull)
    defaultAccountId String?

    @@unique([userId, householdId])
}

enum HouseholdRole {
    OWNER
    ADMIN
    MEMBER
    GUEST
}
